<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Your Lucky Day</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
  </head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="row" align="center"><h1>一夜暴富</h1></div>
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">#</th>
                        <th scope="col">Prize</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="4">Mega Millions</td>
                        <td>1</td>
                        <td class="mega prize-one"></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td class="mega prize-two"></td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td class="mega prize-three"></td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td class="mega prize-four"></td>
                    </tr>
                    <tr>
                        <td rowspan="2">Powerball</td>
                        <td>1</td>
                        <td class="powerball prize-one"></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td class="powerball prize-two"></td>
                    </tr>
                    <tr>
                        <td rowspan="2">Double Play</td>
                        <td>1</td>
                        <td class="double-play prize-one"></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td class="double-play prize-two"></td>
                    </tr>
                    <tr>
                        <td>Total</td>
                        <td>-</td>
                        <td class="total"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
<script>
    $( document ).ready(function() {
        console.log("page loaded");
        fetchPrize();
    });

    function fetchPrize() {
        fetch('https://api.lufan.io/prize')
        .then(response => response.json())
        .then(data => {
            const { powerballPrize, doubleplayPrize, megaMillionsPrize } = data;
            console.log(powerballPrize);
            console.log(doubleplayPrize);
            console.log(megaMillionsPrize);
            document.querySelector('.mega.prize-one').innerHTML = megaMillionsPrize[0];
            document.querySelector('.mega.prize-two').innerHTML = megaMillionsPrize[1];
            document.querySelector('.mega.prize-three').innerHTML = megaMillionsPrize[2];
            document.querySelector('.mega.prize-four').innerHTML = megaMillionsPrize[3];
            document.querySelector('.powerball.prize-one').innerHTML = powerballPrize[0];
            document.querySelector('.powerball.prize-two').innerHTML = powerballPrize[1];
            document.querySelector('.double-play.prize-one').innerHTML = doubleplayPrize[0];
            document.querySelector('.double-play.prize-two').innerHTML = doubleplayPrize[1];
            document.querySelector('.total').innerHTML = megaMillionsPrize.reduce((acc, cur) => acc + cur, 0) + powerballPrize.reduce((acc, cur) => acc + cur, 0) + doubleplayPrize.reduce((acc, cur) => acc + cur, 0);
        });
    };
</script>
</body>
</html>